
const gsExpanded = {
  "gameStage": "playing",
  "board": [
    [
      {
        "kind": "usableSpace",
        "occupiedBy": {
          "tileInfo": {
            "size": 75,
            "maxElements": 5
          },
          "occupiedBy": {
            "kind": "fishes",
            "totalFishes": 1
          }
        }
      },
      {
        "kind": "usableSpace",
        "occupiedBy": {
          "tileInfo": {
            "size": 75,
            "maxElements": 5
          },
          "occupiedBy": {
            "kind": "fishes",
            "totalFishes": 1
          }
        }
      },
      {
        "kind": "usableSpace",
        "occupiedBy": {
          "tileInfo": {
            "size": 75,
            "maxElements": 5
          },
          "occupiedBy": {
            "kind": "fishes",
            "totalFishes": 2
          }
        }
      },
      {
        "kind": "usableSpace",
        "occupiedBy": {
          "tileInfo": {
            "size": 75,
            "maxElements": 5
          },
          "occupiedBy": {
            "kind": "fishes",
            "totalFishes": 1
          }
        }
      },
      {
        "kind": "usableSpace",
        "occupiedBy": {
          "tileInfo": {
            "size": 75,
            "maxElements": 5
          },
          "occupiedBy": {
            "kind": "fishes",
            "totalFishes": 5
          }
        }
      },
      {
        "kind": "usableSpace",
        "occupiedBy": false
      }
    ],
    [
      {
        "kind": "usableSpace",
        "occupiedBy": {
          "tileInfo": {
            "size": 75,
            "maxElements": 5
          },
          "occupiedBy": {
            "kind": "fishes",
            "totalFishes": 3
          }
        }
      },
      {
        "kind": "usableSpace",
        "occupiedBy": {
          "tileInfo": {
            "size": 75,
            "maxElements": 5
          },
          "occupiedBy": {
            "kind": "fishes",
            "totalFishes": 1
          }
        }
      },
      {
        "kind": "usableSpace",
        "occupiedBy": false
      },
      {
        "kind": "usableSpace",
        "occupiedBy": {
          "tileInfo": {
            "size": 75,
            "maxElements": 5
          },
          "occupiedBy": {
            "kind": "fishes",
            "totalFishes": 1
          }
        }
      },
      {
        "kind": "usableSpace",
        "occupiedBy": {
          "tileInfo": {
            "size": 75,
            "maxElements": 5
          },
          "occupiedBy": {
            "kind": "fishes",
            "totalFishes": 1
          }
        }
      },
      {
        "kind": "usableSpace",
        "occupiedBy": {
          "tileInfo": {
            "size": 75,
            "maxElements": 5
          },
          "occupiedBy": {
            "kind": "fishes",
            "totalFishes": 1
          }
        }
      }
    ]
  ],
  "nextMove": false,
  "players": [
    [
      1234,
      {
        "color": "red",
        "score": 0
      }
    ],
    [
      2345,
      {
        "color": "black",
        "score": 0
      }
    ],
    [
      3456,
      {
        "color": "brown",
        "score": 0
      }
    ],
    [
      4567,
      {
        "color": "white",
        "score": 0
      }
    ]
  ]
}

const subGS = {
  "gameStage": "placing",
  "board": [
    [
      {
        "kind": "usableSpace",
        "occupiedBy": {
          "tileInfo": {
            "size": 75,
            "maxElements": 5
          },
          "occupiedBy": {
            "kind": "fishes",
            "totalFishes": 1
          }
        }
      },
      {
        "kind": "usableSpace",
        "occupiedBy": {
          "tileInfo": {
            "size": 75,
            "maxElements": 1
          },
          "occupiedBy": {
            "kind": "penguin",
            "color": "red"
          }
        }
      },
      {
        "kind": "usableSpace",
        "occupiedBy": {
          "tileInfo": {
            "size": 75,
            "maxElements": 5
          },
          "occupiedBy": {
            "kind": "fishes",
            "totalFishes": 2
          }
        }
      },
      {
        "kind": "usableSpace",
        "occupiedBy": {
          "tileInfo": {
            "size": 75,
            "maxElements": 5
          },
          "occupiedBy": {
            "kind": "fishes",
            "totalFishes": 1
          }
        }
      },
      {
        "kind": "usableSpace",
        "occupiedBy": {
          "tileInfo": {
            "size": 75,
            "maxElements": 5
          },
          "occupiedBy": {
            "kind": "fishes",
            "totalFishes": 5
          }
        }
      },
      {
        "kind": "usableSpace",
        "occupiedBy": false
      }
    ],
    [
      {
        "kind": "usableSpace",
        "occupiedBy": {
          "tileInfo": {
            "size": 75,
            "maxElements": 5
          },
          "occupiedBy": {
            "kind": "fishes",
            "totalFishes": 3
          }
        }
      },
      {
        "kind": "usableSpace",
        "occupiedBy": {
          "tileInfo": {
            "size": 75,
            "maxElements": 5
          },
          "occupiedBy": {
            "kind": "fishes",
            "totalFishes": 1
          }
        }
      },
      {
        "kind": "usableSpace",
        "occupiedBy": false
      },
      {
        "kind": "usableSpace",
        "occupiedBy": {
          "tileInfo": {
            "size": 75,
            "maxElements": 5
          },
          "occupiedBy": {
            "kind": "fishes",
            "totalFishes": 1
          }
        }
      },
      {
        "kind": "usableSpace",
        "occupiedBy": {
          "tileInfo": {
            "size": 75,
            "maxElements": 5
          },
          "occupiedBy": {
            "kind": "fishes",
            "totalFishes": 1
          }
        }
      },
      {
        "kind": "usableSpace",
        "occupiedBy": {
          "tileInfo": {
            "size": 75,
            "maxElements": 5
          },
          "occupiedBy": {
            "kind": "fishes",
            "totalFishes": 1
          }
        }
      }
    ]
  ],
  "nextMove": false,
  "players": [
    [
      1234,
      {
        "color": "red",
        "score": 0
      }
    ],
    [
      2345,
      {
        "color": "black",
        "score": 0
      }
    ],
    [
      3456,
      {
        "color": "brown",
        "score": 0
      }
    ],
    [
      4567,
      {
        "color": "white",
        "score": 0
      }
    ]
  ]
}


const treeEx = gsExpanded;
const treeEx2 = [gsExpanded, () => [treeEx]];


describe("game tree predicate", () => {
  it("is treeEx a game tree?", () => {
    assert.deepEqual(isGameTree(treeEx), true)
  })
  it("is treeEx2 a game tree?", () => {
    assert.deepEqual(isGameTree(treeEx2), true)
  })
  it("is [1, 1] a game tree?", () => {
    assert.deepEqual(isGameTree([1, 1]), false)
  })
})

describe("getting the state from gt", () => {
  it("base case", () => {
    assert.deepEqual(getStateFromTree(treeEx), gsExpanded)
  })
  it("sub-tree case", () => {
    assert.deepEqual(getStateFromTree(treeEx2), gsExpanded)
  })
})


describe("getting children", () => {
  //  note: cannnot get children of the base case
  it("sub-tree case", () => {
    assert.deepEqual(getChildren(treeEx2), [treeEx])
  })
})




describe("adding parent", () => {
  it("first part should just be a state", () => {
    assert.deepEqual(addParent(gsExpanded, [treeEx])[0], gsExpanded)
  })
  it("second part, evaluated should be treeEx list", () => {
    assert.deepEqual(addParent(gsExpanded, [treeEx])[1](), [treeEx])
  })
})


